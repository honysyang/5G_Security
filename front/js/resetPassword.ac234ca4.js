"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[75],{44152:function(e,s,a){a.r(s),a.d(s,{default:function(){return p}});var o=a(20641);const r=(0,o.Lk)("div",{class:"el-form-item-msg"},"请输入包含大小写英文、特殊字符、数字的8-16位密码",-1),t=(0,o.Lk)("div",{class:"el-form-item-msg"},"请输入包含大小写英文、特殊字符、数字的8-16位密码",-1);function l(e,s,a,l,d,u){const i=(0,o.g2)("el-step"),n=(0,o.g2)("el-steps"),p=(0,o.g2)("el-input"),m=(0,o.g2)("el-form-item"),w=(0,o.g2)("el-button"),c=(0,o.g2)("el-form"),f=(0,o.g2)("el-result"),_=(0,o.g2)("common-page");return(0,o.uX)(),(0,o.Wv)(_,{title:"重置密码"},{default:(0,o.k6)((()=>[(0,o.bF)(n,{active:d.stepActive,simple:"","finish-status":"success"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{title:"填写新密码"}),(0,o.bF)(i,{title:"完成重置"})])),_:1},8,["active"]),0==d.stepActive?((0,o.uX)(),(0,o.Wv)(c,{key:0,ref:"form",model:d.form,rules:d.rules,"label-width":120},{default:(0,o.k6)((()=>[(0,o.bF)(m,{label:"原密码",prop:"old_password"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:d.form.old_password,"onUpdate:modelValue":s[0]||(s[0]=e=>d.form.old_password=e),"show-password":"",placeholder:"请输入新密码",maxlength:"15"},null,8,["modelValue"]),r])),_:1}),(0,o.bF)(m,{label:"新密码",prop:"new_password"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:d.form.new_password,"onUpdate:modelValue":s[1]||(s[1]=e=>d.form.new_password=e),"show-password":"",placeholder:"请输入新密码",maxlength:"15"},null,8,["modelValue"]),t])),_:1}),(0,o.bF)(m,{label:"确认新密码",prop:"new_password2"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:d.form.new_password2,"onUpdate:modelValue":s[2]||(s[2]=e=>d.form.new_password2=e),"show-password":"",placeholder:"请再一次输入新密码"},null,8,["modelValue"])])),_:1}),(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.bF)(w,{type:"primary",onClick:u.save},{default:(0,o.k6)((()=>[(0,o.eW)("提交")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])):(0,o.Q3)("",!0),1==d.stepActive?((0,o.uX)(),(0,o.Wv)(f,{key:1,icon:"success",title:"密码重置成功","sub-title":"请牢记自己的新密码,返回登录后使用新密码登录"},{extra:(0,o.k6)((()=>[(0,o.bF)(w,{type:"primary",onClick:u.backLogin},{default:(0,o.k6)((()=>[(0,o.eW)("返回登录")])),_:1},8,["onClick"])])),_:1})):(0,o.Q3)("",!0)])),_:1})}a(28743);var d=a(69499),u={components:{commonPage:d["default"]},data(){return{stepActive:0,form:{old_password:"",new_password:"",new_password2:""},rules:{old_password:[{required:!0,message:"请输入原密码"}],new_password:[{required:!0,message:"请输入新的密码"},{validator:(e,s,a)=>{const o=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/;o.test(s)?a():a(new Error("请检查格式"))}}],new_password2:[{required:!0,message:"请再次输入新的密码"},{validator:(e,s,a)=>{s!==this.form.new_password?a(new Error("两次输入密码不一致")):a()}}]},disabled:!1,time:0}},mounted(){},methods:{async save(){var e=await this.$refs.form.validate().catch((()=>{}));if(!e)return!1;{var s=this.$TOOL.data.get("USER_INFO");let e={user_id:s.user_id,old_password:this.form.old_password,new_password:this.form.new_password},a=await this.$API.system.resetPwd.put(e);if(200!=a.code||"success"!=a.status)return this.$message.error(a.message),!1;this.stepActive=1}},backLogin(){this.$router.push({path:"/login"})}}},i=a(66262);const n=(0,i.A)(u,[["render",l]]);var p=n}}]);