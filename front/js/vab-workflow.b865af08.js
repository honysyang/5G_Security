"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[4708],{88483:function(e,l,o){o.r(l),o.d(l,{default:function(){return sl}});var t=o(20641);const d={class:"do"};function i(e,l,o,i,a,n){const s=(0,t.g2)("el-page-header"),r=(0,t.g2)("el-button"),u=(0,t.g2)("el-header"),c=(0,t.g2)("sc-workflow"),p=(0,t.g2)("el-main"),m=(0,t.g2)("el-container");return(0,t.uX)(),(0,t.Wv)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(s,{content:a.data.name},null,8,["content"]),(0,t.Lk)("div",d,[(0,t.bF)(r,{type:"primary",onClick:n.exportJson},{default:(0,t.k6)((()=>[(0,t.eW)("export JSON")])),_:1},8,["onClick"])])])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:a.data.nodeConfig,"onUpdate:modelValue":l[0]||(l[0]=e=>a.data.nodeConfig=e)},null,8,["modelValue"])])),_:1})])),_:1})}const a={class:"sc-workflow-design"},n={class:"box-scale"},s=(0,t.Lk)("div",{class:"end-node"},[(0,t.Lk)("div",{class:"end-node-circle"}),(0,t.Lk)("div",{class:"end-node-text"},"流程结束")],-1);function r(e,l,o,d,i,r){const u=(0,t.g2)("node-wrap"),c=(0,t.g2)("use-select");return(0,t.uX)(),(0,t.CE)("div",a,[(0,t.Lk)("div",n,[i.nodeConfig?((0,t.uX)(),(0,t.Wv)(u,{key:0,modelValue:i.nodeConfig,"onUpdate:modelValue":l[0]||(l[0]=e=>i.nodeConfig=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s]),i.selectVisible?((0,t.uX)(),(0,t.Wv)(c,{key:0,ref:"useselect",onClosed:l[1]||(l[1]=e=>i.selectVisible=!1)},null,512)):(0,t.Q3)("",!0)])}function u(e,l,o,d,i,a){const n=(0,t.g2)("promoter"),s=(0,t.g2)("approver"),r=(0,t.g2)("send"),u=(0,t.g2)("node-wrap",!0),c=(0,t.g2)("branch");return(0,t.uX)(),(0,t.CE)(t.FK,null,[0==i.nodeConfig.type?((0,t.uX)(),(0,t.Wv)(n,{key:0,modelValue:i.nodeConfig,"onUpdate:modelValue":l[0]||(l[0]=e=>i.nodeConfig=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),1==i.nodeConfig.type?((0,t.uX)(),(0,t.Wv)(s,{key:1,modelValue:i.nodeConfig,"onUpdate:modelValue":l[1]||(l[1]=e=>i.nodeConfig=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),2==i.nodeConfig.type?((0,t.uX)(),(0,t.Wv)(r,{key:2,modelValue:i.nodeConfig,"onUpdate:modelValue":l[2]||(l[2]=e=>i.nodeConfig=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),4==i.nodeConfig.type?((0,t.uX)(),(0,t.Wv)(c,{key:3,modelValue:i.nodeConfig,"onUpdate:modelValue":l[3]||(l[3]=e=>i.nodeConfig=e)},{default:(0,t.k6)((e=>[e.node?((0,t.uX)(),(0,t.Wv)(u,{key:0,modelValue:e.node.childNode,"onUpdate:modelValue":l=>e.node.childNode=l},null,8,["modelValue","onUpdate:modelValue"])):(0,t.Q3)("",!0)])),_:1},8,["modelValue"])):(0,t.Q3)("",!0),i.nodeConfig.childNode?((0,t.uX)(),(0,t.Wv)(u,{key:4,modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[4]||(l[4]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"])):(0,t.Q3)("",!0)],64)}var c=o(72644),p=o(9322);const m={class:"node-wrap"},f={class:"title",style:{background:"#ff943e"}},k={class:"content"},g={key:0},h={key:1,class:"placeholder"},b={class:"node-wrap-drawer__title"},C={class:"tags-list"},y={class:"tags-list"},v={key:0},_={style:{width:"100%"}},F={style:{width:"100%"}},V={style:{width:"100%"}};function L(e,l,o,d,i,a){const n=(0,t.g2)("el-icon-user-filled"),s=(0,t.g2)("el-icon"),r=(0,t.g2)("el-icon-close"),u=(0,t.g2)("add-node"),L=(0,t.g2)("el-icon-edit"),w=(0,t.g2)("el-input"),N=(0,t.g2)("el-option"),T=(0,t.g2)("el-select"),U=(0,t.g2)("el-form-item"),W=(0,t.g2)("el-button"),x=(0,t.g2)("el-tag"),X=(0,t.g2)("el-input-number"),E=(0,t.g2)("el-radio"),$=(0,t.g2)("el-radio-group"),Q=(0,t.g2)("el-divider"),S=(0,t.g2)("el-checkbox"),M=(0,t.g2)("el-form"),R=(0,t.g2)("el-main"),j=(0,t.g2)("el-footer"),O=(0,t.g2)("el-container"),I=(0,t.g2)("el-drawer");return(0,t.uX)(),(0,t.CE)("div",m,[(0,t.Lk)("div",{class:"node-wrap-box",onClick:l[1]||(l[1]=(...e)=>a.show&&a.show(...e))},[(0,t.Lk)("div",f,[(0,t.bF)(s,{class:"icon"},{default:(0,t.k6)((()=>[(0,t.bF)(n)])),_:1}),(0,t.Lk)("span",null,(0,c.v_)(i.nodeConfig.nodeName),1),(0,t.bF)(s,{class:"close",onClick:l[0]||(l[0]=(0,p.D$)((e=>a.delNode()),["stop"]))},{default:(0,t.k6)((()=>[(0,t.bF)(r)])),_:1})]),(0,t.Lk)("div",k,[a.toText(i.nodeConfig)?((0,t.uX)(),(0,t.CE)("span",g,(0,c.v_)(a.toText(i.nodeConfig)),1)):((0,t.uX)(),(0,t.CE)("span",h,"请选择"))])]),(0,t.bF)(u,{modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[2]||(l[2]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"]),(0,t.bF)(I,{title:"审批人设置",modelValue:i.drawer,"onUpdate:modelValue":l[17]||(l[17]=e=>i.drawer=e),"destroy-on-close":"","append-to-body":"",size:500},{header:(0,t.k6)((()=>[(0,t.Lk)("div",b,[i.isEditTitle?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("label",{key:0,onClick:l[3]||(l[3]=(...e)=>a.editTitle&&a.editTitle(...e))},[(0,t.eW)((0,c.v_)(i.form.nodeName),1),(0,t.bF)(s,{class:"node-wrap-drawer__title-edit"},{default:(0,t.k6)((()=>[(0,t.bF)(L)])),_:1})])),i.isEditTitle?((0,t.uX)(),(0,t.Wv)(w,{key:1,ref:"nodeTitle",modelValue:i.form.nodeName,"onUpdate:modelValue":l[4]||(l[4]=e=>i.form.nodeName=e),clearable:"",onBlur:a.saveTitle,onKeyup:(0,p.jR)(a.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,t.Q3)("",!0)])])),default:(0,t.k6)((()=>[(0,t.bF)(O,null,{default:(0,t.k6)((()=>[(0,t.bF)(R,{style:{padding:"0 20px 20px 20px"}},{default:(0,t.k6)((()=>[(0,t.bF)(M,{"label-position":"top"},{default:(0,t.k6)((()=>[(0,t.bF)(U,{label:"审批人员类型"},{default:(0,t.k6)((()=>[(0,t.bF)(T,{modelValue:i.form.setType,"onUpdate:modelValue":l[5]||(l[5]=e=>i.form.setType=e)},{default:(0,t.k6)((()=>[(0,t.bF)(N,{value:1,label:"指定成员"}),(0,t.bF)(N,{value:2,label:"主管"}),(0,t.bF)(N,{value:3,label:"角色"}),(0,t.bF)(N,{value:4,label:"发起人自选"}),(0,t.bF)(N,{value:5,label:"发起人自己"}),(0,t.bF)(N,{value:7,label:"连续多级主管"})])),_:1},8,["modelValue"])])),_:1}),1==i.form.setType?((0,t.uX)(),(0,t.Wv)(U,{key:0,label:"选择成员"},{default:(0,t.k6)((()=>[(0,t.bF)(W,{type:"primary",icon:"el-icon-plus",round:"",onClick:l[6]||(l[6]=e=>a.selectHandle(1,i.form.nodeUserList))},{default:(0,t.k6)((()=>[(0,t.eW)("选择人员")])),_:1}),(0,t.Lk)("div",C,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.form.nodeUserList,((e,l)=>((0,t.uX)(),(0,t.Wv)(x,{key:e.id,closable:"",onClose:e=>a.delUser(l)},{default:(0,t.k6)((()=>[(0,t.eW)((0,c.v_)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1})):(0,t.Q3)("",!0),2==i.form.setType?((0,t.uX)(),(0,t.Wv)(U,{key:1,label:"指定主管"},{default:(0,t.k6)((()=>[(0,t.eW)(" 发起人的第 "),(0,t.bF)(X,{modelValue:i.form.examineLevel,"onUpdate:modelValue":l[7]||(l[7]=e=>i.form.examineLevel=e),min:1},null,8,["modelValue"]),(0,t.eW)(" 级主管 ")])),_:1})):(0,t.Q3)("",!0),3==i.form.setType?((0,t.uX)(),(0,t.Wv)(U,{key:2,label:"选择角色"},{default:(0,t.k6)((()=>[(0,t.bF)(W,{type:"primary",icon:"el-icon-plus",round:"",onClick:l[8]||(l[8]=e=>a.selectHandle(2,i.form.nodeRoleList))},{default:(0,t.k6)((()=>[(0,t.eW)("选择角色")])),_:1}),(0,t.Lk)("div",y,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.form.nodeRoleList,((e,l)=>((0,t.uX)(),(0,t.Wv)(x,{key:e.id,type:"info",closable:"",onClose:e=>a.delRole(l)},{default:(0,t.k6)((()=>[(0,t.eW)((0,c.v_)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1})):(0,t.Q3)("",!0),4==i.form.setType?((0,t.uX)(),(0,t.Wv)(U,{key:3,label:"发起人自选"},{default:(0,t.k6)((()=>[(0,t.bF)($,{modelValue:i.form.selectMode,"onUpdate:modelValue":l[9]||(l[9]=e=>i.form.selectMode=e)},{default:(0,t.k6)((()=>[(0,t.bF)(E,{label:1},{default:(0,t.k6)((()=>[(0,t.eW)("自选一个人")])),_:1}),(0,t.bF)(E,{label:2},{default:(0,t.k6)((()=>[(0,t.eW)("自选多个人")])),_:1})])),_:1},8,["modelValue"])])),_:1})):(0,t.Q3)("",!0),7==i.form.setType?((0,t.uX)(),(0,t.Wv)(U,{key:4,label:"连续主管审批终点"},{default:(0,t.k6)((()=>[(0,t.bF)($,{modelValue:i.form.directorMode,"onUpdate:modelValue":l[10]||(l[10]=e=>i.form.directorMode=e)},{default:(0,t.k6)((()=>[(0,t.bF)(E,{label:0},{default:(0,t.k6)((()=>[(0,t.eW)("直到最上层主管")])),_:1}),(0,t.bF)(E,{label:1},{default:(0,t.k6)((()=>[(0,t.eW)("自定义审批终点")])),_:1})])),_:1},8,["modelValue"]),1==i.form.directorMode?((0,t.uX)(),(0,t.CE)("p",v,[(0,t.eW)("直到发起人的第 "),(0,t.bF)(X,{modelValue:i.form.directorLevel,"onUpdate:modelValue":l[11]||(l[11]=e=>i.form.directorLevel=e),min:1},null,8,["modelValue"]),(0,t.eW)(" 级主管")])):(0,t.Q3)("",!0)])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(Q),(0,t.bF)(U,{label:""},{default:(0,t.k6)((()=>[(0,t.bF)(S,{modelValue:i.form.termAuto,"onUpdate:modelValue":l[12]||(l[12]=e=>i.form.termAuto=e),label:"超时自动审批"},null,8,["modelValue"])])),_:1}),i.form.termAuto?((0,t.uX)(),(0,t.CE)(t.FK,{key:5},[(0,t.bF)(U,{label:"审批期限（为 0 则不生效）"},{default:(0,t.k6)((()=>[(0,t.bF)(X,{modelValue:i.form.term,"onUpdate:modelValue":l[13]||(l[13]=e=>i.form.term=e),min:0},null,8,["modelValue"]),(0,t.eW)(" 小时 ")])),_:1}),(0,t.bF)(U,{label:"审批期限超时后执行"},{default:(0,t.k6)((()=>[(0,t.bF)($,{modelValue:i.form.termMode,"onUpdate:modelValue":l[14]||(l[14]=e=>i.form.termMode=e)},{default:(0,t.k6)((()=>[(0,t.bF)(E,{label:0},{default:(0,t.k6)((()=>[(0,t.eW)("自动通过")])),_:1}),(0,t.bF)(E,{label:1},{default:(0,t.k6)((()=>[(0,t.eW)("自动拒绝")])),_:1})])),_:1},8,["modelValue"])])),_:1})],64)):(0,t.Q3)("",!0),(0,t.bF)(Q),(0,t.bF)(U,{label:"多人审批时审批方式"},{default:(0,t.k6)((()=>[(0,t.bF)($,{modelValue:i.form.examineMode,"onUpdate:modelValue":l[15]||(l[15]=e=>i.form.examineMode=e)},{default:(0,t.k6)((()=>[(0,t.Lk)("p",_,[(0,t.bF)(E,{label:1},{default:(0,t.k6)((()=>[(0,t.eW)("按顺序依次审批")])),_:1})]),(0,t.Lk)("p",F,[(0,t.bF)(E,{label:2},{default:(0,t.k6)((()=>[(0,t.eW)("会签 (可同时审批，每个人必须审批通过)")])),_:1})]),(0,t.Lk)("p",V,[(0,t.bF)(E,{label:3},{default:(0,t.k6)((()=>[(0,t.eW)("或签 (有一人审批通过即可)")])),_:1})])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(j,null,{default:(0,t.k6)((()=>[(0,t.bF)(W,{type:"primary",onClick:a.save},{default:(0,t.k6)((()=>[(0,t.eW)("保存")])),_:1},8,["onClick"]),(0,t.bF)(W,{onClick:l[16]||(l[16]=e=>i.drawer=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("取消")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const w={class:"add-node-btn-box"},N={class:"add-node-btn"},T={class:"add-node-popover-body"},U=(0,t.Lk)("p",null,"审批节点",-1),W=(0,t.Lk)("p",null,"抄送节点",-1),x=(0,t.Lk)("p",null,"条件分支",-1);function X(e,l,o,d,i,a){const n=(0,t.g2)("el-button"),s=(0,t.g2)("el-icon-user-filled"),r=(0,t.g2)("el-icon"),u=(0,t.g2)("el-icon-promotion"),c=(0,t.g2)("el-icon-share"),p=(0,t.g2)("el-popover");return(0,t.uX)(),(0,t.CE)("div",w,[(0,t.Lk)("div",N,[(0,t.bF)(p,{placement:"right-start",width:270,trigger:"click","hide-after":0,"show-after":0},{reference:(0,t.k6)((()=>[(0,t.bF)(n,{type:"primary",icon:"el-icon-plus",circle:""})])),default:(0,t.k6)((()=>[(0,t.Lk)("div",T,[(0,t.Lk)("ul",null,[(0,t.Lk)("li",null,[(0,t.bF)(r,{style:{color:"#ff943e"},onClick:l[0]||(l[0]=e=>a.addType(1))},{default:(0,t.k6)((()=>[(0,t.bF)(s)])),_:1}),U]),(0,t.Lk)("li",null,[(0,t.bF)(r,{style:{color:"#3296fa"},onClick:l[1]||(l[1]=e=>a.addType(2))},{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1}),W]),(0,t.Lk)("li",null,[(0,t.bF)(r,{style:{color:"#15BC83"},onClick:l[2]||(l[2]=e=>a.addType(4))},{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1}),x])])])])),_:1})])])}var E={props:{modelValue:{type:Object,default:()=>{}}},data(){return{}},mounted(){},methods:{addType(e){var l={};1==e?l={nodeName:"审核人",type:1,setType:1,nodeUserList:[],nodeRoleList:[],examineLevel:1,directorLevel:1,selectMode:1,termAuto:!1,term:0,termMode:1,examineMode:1,directorMode:0,childNode:this.modelValue}:2==e?l={nodeName:"抄送人",type:2,userSelectFlag:!0,nodeUserList:[],childNode:this.modelValue}:4==e&&(l={nodeName:"条件路由",type:4,conditionNodes:[{nodeName:"条件1",type:3,priorityLevel:1,conditionMode:1,conditionList:[]},{nodeName:"条件2",type:3,priorityLevel:2,conditionMode:1,conditionList:[]}],childNode:this.modelValue}),this.$emit("update:modelValue",l)}}},$=o(66262);const Q=(0,$.A)(E,[["render",X]]);var S=Q,M={inject:["select"],props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:S},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},save(){this.$emit("update:modelValue",this.form),this.drawer=!1},delNode(){this.$emit("update:modelValue",this.nodeConfig.childNode)},delUser(e){this.form.nodeUserList.splice(e,1)},delRole(e){this.form.nodeRoleList.splice(e,1)},selectHandle(e,l){this.select(e,l)},toText(e){if(1==e.setType){if(e.nodeUserList&&e.nodeUserList.length>0){const l=e.nodeUserList.map((e=>e.name)).join("、");return l}return!1}if(2==e.setType)return 1==e.examineLevel?"直接主管":`发起人的第${e.examineLevel}级主管`;if(3==e.setType){if(e.nodeRoleList&&e.nodeRoleList.length>0){const l=e.nodeRoleList.map((e=>e.name)).join("、");return"角色-"+l}return!1}return 4==e.setType?"发起人自选":5==e.setType?"发起人自己":7==e.setType?"连续多级主管":void 0}}};const R=(0,$.A)(M,[["render",L]]);var j=R;const O={class:"node-wrap"},I={class:"title",style:{background:"#576a95"}},K={class:"content"},A={class:"node-wrap-drawer__title"},P={class:"tags-list"};function z(e,l,o,d,i,a){const n=(0,t.g2)("el-icon-user-filled"),s=(0,t.g2)("el-icon"),r=(0,t.g2)("add-node"),u=(0,t.g2)("el-icon-edit"),m=(0,t.g2)("el-input"),f=(0,t.g2)("el-button"),k=(0,t.g2)("el-tag"),g=(0,t.g2)("el-form-item"),h=(0,t.g2)("el-alert"),b=(0,t.g2)("el-form"),C=(0,t.g2)("el-main"),y=(0,t.g2)("el-footer"),v=(0,t.g2)("el-container"),_=(0,t.g2)("el-drawer");return(0,t.uX)(),(0,t.CE)("div",O,[(0,t.Lk)("div",{class:"node-wrap-box start-node",onClick:l[0]||(l[0]=(...e)=>a.show&&a.show(...e))},[(0,t.Lk)("div",I,[(0,t.bF)(s,{class:"icon"},{default:(0,t.k6)((()=>[(0,t.bF)(n)])),_:1}),(0,t.Lk)("span",null,(0,c.v_)(i.nodeConfig.nodeName),1)]),(0,t.Lk)("div",K,[(0,t.Lk)("span",null,(0,c.v_)(a.toText(i.nodeConfig)),1)])]),(0,t.bF)(r,{modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[1]||(l[1]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"]),(0,t.bF)(_,{title:"发起人",modelValue:i.drawer,"onUpdate:modelValue":l[6]||(l[6]=e=>i.drawer=e),"destroy-on-close":"","append-to-body":"",size:500},{header:(0,t.k6)((()=>[(0,t.Lk)("div",A,[i.isEditTitle?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("label",{key:0,onClick:l[2]||(l[2]=(...e)=>a.editTitle&&a.editTitle(...e))},[(0,t.eW)((0,c.v_)(i.form.nodeName),1),(0,t.bF)(s,{class:"node-wrap-drawer__title-edit"},{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])),i.isEditTitle?((0,t.uX)(),(0,t.Wv)(m,{key:1,ref:"nodeTitle",modelValue:i.form.nodeName,"onUpdate:modelValue":l[3]||(l[3]=e=>i.form.nodeName=e),clearable:"",onBlur:a.saveTitle,onKeyup:(0,p.jR)(a.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,t.Q3)("",!0)])])),default:(0,t.k6)((()=>[(0,t.bF)(v,null,{default:(0,t.k6)((()=>[(0,t.bF)(C,{style:{padding:"0 20px 20px 20px"}},{default:(0,t.k6)((()=>[(0,t.bF)(b,{"label-position":"top"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{label:"谁可以发起此审批"},{default:(0,t.k6)((()=>[(0,t.bF)(f,{type:"primary",icon:"el-icon-plus",round:"",onClick:l[4]||(l[4]=e=>a.selectHandle(2,i.form.nodeRoleList))},{default:(0,t.k6)((()=>[(0,t.eW)("选择角色")])),_:1}),(0,t.Lk)("div",P,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.form.nodeRoleList,((e,l)=>((0,t.uX)(),(0,t.Wv)(k,{key:e.id,type:"info",closable:"",onClose:e=>a.delRole(l)},{default:(0,t.k6)((()=>[(0,t.eW)((0,c.v_)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1}),0==i.form.nodeRoleList.length?((0,t.uX)(),(0,t.Wv)(h,{key:0,title:"不指定则默认所有人都可发起此审批",type:"info",closable:!1})):(0,t.Q3)("",!0)])),_:1})])),_:1}),(0,t.bF)(y,null,{default:(0,t.k6)((()=>[(0,t.bF)(f,{type:"primary",onClick:a.save},{default:(0,t.k6)((()=>[(0,t.eW)("保存")])),_:1},8,["onClick"]),(0,t.bF)(f,{onClick:l[5]||(l[5]=e=>i.drawer=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("取消")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var D={inject:["select"],props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:S},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.isEditTitle=!1,this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},selectHandle(e,l){this.select(e,l)},delRole(e){this.form.nodeRoleList.splice(e,1)},save(){this.$emit("update:modelValue",this.form),this.drawer=!1},toText(e){return e.nodeRoleList&&e.nodeRoleList.length>0?e.nodeRoleList.map((e=>e.name)).join("、"):"所有人"}}};const J=(0,$.A)(D,[["render",z]]);var B=J;const G={class:"branch-wrap"},H={class:"branch-box-wrap"},q={class:"branch-box"},Y={class:"condition-node"},Z={class:"condition-node-box"},ee=["onClick"],le=["onClick"],oe={class:"title"},te={class:"node-title"},de={class:"priority-title"},ie={class:"content"},ae={key:0},ne={key:1,class:"placeholder"},se=["onClick"],re={key:1,class:"top-left-cover-line"},ue={key:2,class:"bottom-left-cover-line"},ce={key:3,class:"top-right-cover-line"},pe={key:4,class:"bottom-right-cover-line"},me={class:"node-wrap-drawer__title"};function fe(e,l,o,d,i,a){const n=(0,t.g2)("el-button"),s=(0,t.g2)("el-icon-arrow-left"),r=(0,t.g2)("el-icon"),u=(0,t.g2)("el-icon-close"),m=(0,t.g2)("el-icon-arrow-right"),f=(0,t.g2)("add-node"),k=(0,t.g2)("el-icon-edit"),g=(0,t.g2)("el-input"),h=(0,t.g2)("el-radio"),b=(0,t.g2)("el-radio-group"),C=(0,t.g2)("el-form-item"),y=(0,t.g2)("el-divider"),v=(0,t.g2)("el-table-column"),_=(0,t.g2)("el-option"),F=(0,t.g2)("el-select"),V=(0,t.g2)("el-link"),L=(0,t.g2)("el-table"),w=(0,t.g2)("el-form"),N=(0,t.g2)("el-main"),T=(0,t.g2)("el-footer"),U=(0,t.g2)("el-container"),W=(0,t.g2)("el-drawer");return(0,t.uX)(),(0,t.CE)("div",G,[(0,t.Lk)("div",H,[(0,t.Lk)("div",q,[(0,t.bF)(n,{class:"add-branch",type:"success",plain:"",round:"",onClick:a.addTerm},{default:(0,t.k6)((()=>[(0,t.eW)("添加条件")])),_:1},8,["onClick"]),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.nodeConfig.conditionNodes,((l,o)=>((0,t.uX)(),(0,t.CE)("div",{class:"col-box",key:o},[(0,t.Lk)("div",Y,[(0,t.Lk)("div",Z,[(0,t.Lk)("div",{class:"auto-judge",onClick:e=>a.show(o)},[0!=o?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"sort-left",onClick:(0,p.D$)((e=>a.arrTransfer(o,-1)),["stop"])},[(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(s)])),_:1})],8,le)):(0,t.Q3)("",!0),(0,t.Lk)("div",oe,[(0,t.Lk)("span",te,(0,c.v_)(l.nodeName),1),(0,t.Lk)("span",de,"优先级"+(0,c.v_)(l.priorityLevel),1),(0,t.bF)(r,{class:"close",onClick:(0,p.D$)((e=>a.delTerm(o)),["stop"])},{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:2},1032,["onClick"])]),(0,t.Lk)("div",ie,[a.toText(i.nodeConfig,o)?((0,t.uX)(),(0,t.CE)("span",ae,(0,c.v_)(a.toText(i.nodeConfig,o)),1)):((0,t.uX)(),(0,t.CE)("span",ne,"请设置条件"))]),o!=i.nodeConfig.conditionNodes.length-1?((0,t.uX)(),(0,t.CE)("div",{key:1,class:"sort-right",onClick:(0,p.D$)((e=>a.arrTransfer(o)),["stop"])},[(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(m)])),_:1})],8,se)):(0,t.Q3)("",!0)],8,ee),(0,t.bF)(f,{modelValue:l.childNode,"onUpdate:modelValue":e=>l.childNode=e},null,8,["modelValue","onUpdate:modelValue"])])]),l.childNode?(0,t.RG)(e.$slots,"default",{key:0,node:l}):(0,t.Q3)("",!0),0==o?((0,t.uX)(),(0,t.CE)("div",re)):(0,t.Q3)("",!0),0==o?((0,t.uX)(),(0,t.CE)("div",ue)):(0,t.Q3)("",!0),o==i.nodeConfig.conditionNodes.length-1?((0,t.uX)(),(0,t.CE)("div",ce)):(0,t.Q3)("",!0),o==i.nodeConfig.conditionNodes.length-1?((0,t.uX)(),(0,t.CE)("div",pe)):(0,t.Q3)("",!0)])))),128))]),(0,t.bF)(f,{modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[0]||(l[0]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"])]),(0,t.bF)(W,{title:"条件设置",modelValue:i.drawer,"onUpdate:modelValue":l[5]||(l[5]=e=>i.drawer=e),"destroy-on-close":"","append-to-body":"",size:600},{header:(0,t.k6)((()=>[(0,t.Lk)("div",me,[i.isEditTitle?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("label",{key:0,onClick:l[1]||(l[1]=(...e)=>a.editTitle&&a.editTitle(...e))},[(0,t.eW)((0,c.v_)(i.form.nodeName),1),(0,t.bF)(r,{class:"node-wrap-drawer__title-edit"},{default:(0,t.k6)((()=>[(0,t.bF)(k)])),_:1})])),i.isEditTitle?((0,t.uX)(),(0,t.Wv)(g,{key:1,ref:"nodeTitle",modelValue:i.form.nodeName,"onUpdate:modelValue":l[2]||(l[2]=e=>i.form.nodeName=e),clearable:"",onBlur:a.saveTitle,onKeyup:(0,p.jR)(a.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,t.Q3)("",!0)])])),default:(0,t.k6)((()=>[(0,t.bF)(U,null,{default:(0,t.k6)((()=>[(0,t.bF)(N,{style:{padding:"0 20px 20px 20px"}},{default:(0,t.k6)((()=>[(0,t.bF)(w,{"label-position":"top"},{default:(0,t.k6)((()=>[(0,t.bF)(C,{label:"条件关系"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{modelValue:i.form.conditionMode,"onUpdate:modelValue":l[3]||(l[3]=e=>i.form.conditionMode=e)},{default:(0,t.k6)((()=>[(0,t.bF)(h,{label:1},{default:(0,t.k6)((()=>[(0,t.eW)("且")])),_:1}),(0,t.bF)(h,{label:2},{default:(0,t.k6)((()=>[(0,t.eW)("或")])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(y),(0,t.bF)(C,null,{default:(0,t.k6)((()=>[(0,t.bF)(L,{data:i.form.conditionList},{default:(0,t.k6)((()=>[(0,t.bF)(v,{prop:"label",label:"描述"},{default:(0,t.k6)((e=>[(0,t.bF)(g,{modelValue:e.row.label,"onUpdate:modelValue":l=>e.row.label=l,placeholder:"描述"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(v,{prop:"field",label:"条件字段",width:"130"},{default:(0,t.k6)((e=>[(0,t.bF)(g,{modelValue:e.row.field,"onUpdate:modelValue":l=>e.row.field=l,placeholder:"条件字段"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(v,{prop:"operator",label:"运算符",width:"130"},{default:(0,t.k6)((e=>[(0,t.bF)(F,{modelValue:e.row.operator,"onUpdate:modelValue":l=>e.row.operator=l,placeholder:"Select"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{label:"等于",value:"="}),(0,t.bF)(_,{label:"不等于",value:"!="}),(0,t.bF)(_,{label:"大于",value:">"}),(0,t.bF)(_,{label:"大于等于",value:">="}),(0,t.bF)(_,{label:"小于",value:"<"}),(0,t.bF)(_,{label:"小于等于",value:"<="}),(0,t.bF)(_,{label:"包含",value:"include"}),(0,t.bF)(_,{label:"不包含",value:"notinclude"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(v,{prop:"value",label:"值",width:"100"},{default:(0,t.k6)((e=>[(0,t.bF)(g,{modelValue:e.row.value,"onUpdate:modelValue":l=>e.row.value=l,placeholder:"值"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(v,{prop:"value",label:"移除",width:"55"},{default:(0,t.k6)((e=>[(0,t.bF)(V,{type:"danger",underline:!1,onClick:l=>a.deleteConditionList(e.$index)},{default:(0,t.k6)((()=>[(0,t.eW)("移除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,t.Lk)("p",null,[(0,t.bF)(n,{type:"primary",icon:"el-icon-plus",round:"",onClick:a.addConditionList},{default:(0,t.k6)((()=>[(0,t.eW)("增加条件")])),_:1},8,["onClick"])])])),_:1})])),_:1}),(0,t.bF)(T,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,{type:"primary",onClick:a.save},{default:(0,t.k6)((()=>[(0,t.eW)("保存")])),_:1},8,["onClick"]),(0,t.bF)(n,{onClick:l[4]||(l[4]=e=>i.drawer=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("取消")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}o(28743);var ke={props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:S},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,index:0,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(e){this.index=e,this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig.conditionNodes[e])),this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},save(){this.nodeConfig.conditionNodes[this.index]=this.form,this.$emit("update:modelValue",this.nodeConfig),this.drawer=!1},addTerm(){let e=this.nodeConfig.conditionNodes.length+1;this.nodeConfig.conditionNodes.push({nodeName:"条件"+e,type:3,priorityLevel:e,conditionMode:1,conditionList:[]})},delTerm(e){this.nodeConfig.conditionNodes.splice(e,1),1==this.nodeConfig.conditionNodes.length&&(this.nodeConfig.childNode&&(this.nodeConfig.conditionNodes[0].childNode?this.reData(this.nodeConfig.conditionNodes[0].childNode,this.nodeConfig.childNode):this.nodeConfig.conditionNodes[0].childNode=this.nodeConfig.childNode),this.$emit("update:modelValue",this.nodeConfig.conditionNodes[0].childNode))},reData(e,l){e.childNode?this.reData(e.childNode,l):e.childNode=l},arrTransfer(e,l=1){this.nodeConfig.conditionNodes[e]=this.nodeConfig.conditionNodes.splice(e+l,1,this.nodeConfig.conditionNodes[e])[0],this.nodeConfig.conditionNodes.map(((e,l)=>{e.priorityLevel=l+1})),this.$emit("update:modelValue",this.nodeConfig)},addConditionList(){this.form.conditionList.push({label:"",field:"",operator:"=",value:""})},deleteConditionList(e){this.form.conditionList.splice(e,1)},toText(e,l){var{conditionList:o}=e.conditionNodes[l];if(o&&1==o.length){const e=o.map((e=>`${e.label}${e.operator}${e.value}`)).join(" 和 ");return e}if(o&&o.length>1){const t=1==e.conditionNodes[l].conditionMode?"且行":"或行";return o.length+"个条件，"+t}return l==e.conditionNodes.length-1&&"其他条件进入此流程"}}};const ge=(0,$.A)(ke,[["render",fe]]);var he=ge;const be={class:"node-wrap"},Ce={class:"title",style:{background:"#3296fa"}},ye={class:"content"},ve={key:0},_e={key:1,class:"placeholder"},Fe={class:"node-wrap-drawer__title"},Ve={class:"tags-list"};function Le(e,l,o,d,i,a){const n=(0,t.g2)("el-icon-promotion"),s=(0,t.g2)("el-icon"),r=(0,t.g2)("el-icon-close"),u=(0,t.g2)("add-node"),m=(0,t.g2)("el-icon-edit"),f=(0,t.g2)("el-input"),k=(0,t.g2)("el-button"),g=(0,t.g2)("el-tag"),h=(0,t.g2)("el-form-item"),b=(0,t.g2)("el-checkbox"),C=(0,t.g2)("el-form"),y=(0,t.g2)("el-main"),v=(0,t.g2)("el-footer"),_=(0,t.g2)("el-container"),F=(0,t.g2)("el-drawer");return(0,t.uX)(),(0,t.CE)("div",be,[(0,t.Lk)("div",{class:"node-wrap-box",onClick:l[1]||(l[1]=(...e)=>a.show&&a.show(...e))},[(0,t.Lk)("div",Ce,[(0,t.bF)(s,{class:"icon"},{default:(0,t.k6)((()=>[(0,t.bF)(n)])),_:1}),(0,t.Lk)("span",null,(0,c.v_)(i.nodeConfig.nodeName),1),(0,t.bF)(s,{class:"close",onClick:l[0]||(l[0]=(0,p.D$)((e=>a.delNode()),["stop"]))},{default:(0,t.k6)((()=>[(0,t.bF)(r)])),_:1})]),(0,t.Lk)("div",ye,[a.toText(i.nodeConfig)?((0,t.uX)(),(0,t.CE)("span",ve,(0,c.v_)(a.toText(i.nodeConfig)),1)):((0,t.uX)(),(0,t.CE)("span",_e,"请选择人员"))])]),(0,t.bF)(u,{modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[2]||(l[2]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"]),(0,t.bF)(F,{title:"抄送人设置",modelValue:i.drawer,"onUpdate:modelValue":l[8]||(l[8]=e=>i.drawer=e),"destroy-on-close":"","append-to-body":"",size:500},{header:(0,t.k6)((()=>[(0,t.Lk)("div",Fe,[i.isEditTitle?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("label",{key:0,onClick:l[3]||(l[3]=(...e)=>a.editTitle&&a.editTitle(...e))},[(0,t.eW)((0,c.v_)(i.form.nodeName),1),(0,t.bF)(s,{class:"node-wrap-drawer__title-edit"},{default:(0,t.k6)((()=>[(0,t.bF)(m)])),_:1})])),i.isEditTitle?((0,t.uX)(),(0,t.Wv)(f,{key:1,ref:"nodeTitle",modelValue:i.form.nodeName,"onUpdate:modelValue":l[4]||(l[4]=e=>i.form.nodeName=e),clearable:"",onBlur:a.saveTitle,onKeyup:(0,p.jR)(a.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,t.Q3)("",!0)])])),default:(0,t.k6)((()=>[(0,t.bF)(_,null,{default:(0,t.k6)((()=>[(0,t.bF)(y,{style:{padding:"0 20px 20px 20px"}},{default:(0,t.k6)((()=>[(0,t.bF)(C,{"label-position":"top"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{label:"选择要抄送的人员"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{type:"primary",icon:"el-icon-plus",round:"",onClick:l[5]||(l[5]=e=>a.selectHandle(1,i.form.nodeUserList))},{default:(0,t.k6)((()=>[(0,t.eW)("选择人员")])),_:1}),(0,t.Lk)("div",Ve,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.form.nodeUserList,((e,l)=>((0,t.uX)(),(0,t.Wv)(g,{key:e.id,closable:"",onClose:e=>a.delUser(l)},{default:(0,t.k6)((()=>[(0,t.eW)((0,c.v_)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1}),(0,t.bF)(h,{label:""},{default:(0,t.k6)((()=>[(0,t.bF)(b,{modelValue:i.form.userSelectFlag,"onUpdate:modelValue":l[6]||(l[6]=e=>i.form.userSelectFlag=e),label:"允许发起人自选抄送人"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(v,null,{default:(0,t.k6)((()=>[(0,t.bF)(k,{type:"primary",onClick:a.save},{default:(0,t.k6)((()=>[(0,t.eW)("保存")])),_:1},8,["onClick"]),(0,t.bF)(k,{onClick:l[7]||(l[7]=e=>i.drawer=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("取消")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var we={inject:["select"],props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:S},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},save(){this.$emit("update:modelValue",this.form),this.drawer=!1},delNode(){this.$emit("update:modelValue",this.nodeConfig.childNode)},delUser(e){this.form.nodeUserList.splice(e,1)},selectHandle(e,l){this.select(e,l)},toText(e){if(e.nodeUserList&&e.nodeUserList.length>0){const l=e.nodeUserList.map((e=>e.name)).join("、");return l}return!!e.userSelectFlag&&"发起人自选"}}};const Ne=(0,$.A)(we,[["render",Le]]);var Te=Ne,Ue={props:{modelValue:{type:Object,default:()=>{}}},components:{approver:j,promoter:B,branch:he,send:Te},data(){return{nodeConfig:{}}},watch:{modelValue(e){this.nodeConfig=e},nodeConfig(e){this.$emit("update:modelValue",e)}},mounted(){this.nodeConfig=this.modelValue},methods:{}};const We=(0,$.A)(Ue,[["render",u]]);var xe=We;const Xe={key:0,class:"sc-user-select"},Ee={class:"sc-user-select__left"},$e={class:"sc-user-select__search"},Qe={class:"sc-user-select__select"},Se={class:"sc-user-select__tree"},Me={class:"sc-user-select__user"},Re={class:"sc-user-select__user__list"},je={class:"sc-user-select__toicon"},Oe={class:"sc-user-select__selected"},Ie={class:"name"},Ke={class:"delete"},Ae={key:1,class:"sc-user-select sc-user-select-role"},Pe={class:"sc-user-select__left"},ze={class:"sc-user-select__select"},De={class:"sc-user-select__tree"},Je={class:"sc-user-select__toicon"},Be={class:"sc-user-select__selected"},Ge={class:"name"},He={class:"delete"};function qe(e,l,o,d,i,a){const n=(0,t.g2)("el-button"),s=(0,t.g2)("el-input"),r=(0,t.g2)("el-tree"),u=(0,t.g2)("el-scrollbar"),p=(0,t.g2)("el-pagination"),m=(0,t.g2)("el-icon-arrow-right"),f=(0,t.g2)("el-icon"),k=(0,t.g2)("el-avatar"),g=(0,t.g2)("el-dialog"),h=(0,t.gN)("loading");return(0,t.uX)(),(0,t.Wv)(g,{modelValue:i.dialogVisible,"onUpdate:modelValue":l[3]||(l[3]=e=>i.dialogVisible=e),title:i.titleMap[i.type-1],width:1==i.type?680:460,"destroy-on-close":"","append-to-body":"",onClosed:l[4]||(l[4]=l=>e.$emit("closed"))},{footer:(0,t.k6)((()=>[(0,t.bF)(n,{onClick:l[2]||(l[2]=e=>i.dialogVisible=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("取 消")])),_:1}),(0,t.bF)(n,{type:"primary",onClick:a.save},{default:(0,t.k6)((()=>[(0,t.eW)("确 认")])),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[1==i.type?((0,t.uX)(),(0,t.CE)("div",Xe,[(0,t.Lk)("div",Ee,[(0,t.Lk)("div",$e,[(0,t.bF)(s,{modelValue:i.keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>i.keyword=e),"prefix-icon":"el-icon-search",placeholder:"搜索成员"},{append:(0,t.k6)((()=>[(0,t.bF)(n,{icon:"el-icon-search",onClick:a.search},null,8,["onClick"])])),_:1},8,["modelValue"])]),(0,t.Lk)("div",Qe,[(0,t.bo)(((0,t.uX)(),(0,t.CE)("div",Se,[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"menu",ref:"groupTree",data:i.group,"node-key":i.groupProps.key,props:i.groupProps,"highlight-current":"","expand-on-click-node":!1,"current-node-key":i.groupId,onNodeClick:a.groupClick},null,8,["data","node-key","props","current-node-key","onNodeClick"])])),_:1})])),[[h,i.showGrouploading]]),(0,t.bo)(((0,t.uX)(),(0,t.CE)("div",Me,[(0,t.Lk)("div",Re,[(0,t.bF)(u,{ref:"userScrollbar"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"menu",ref:"userTree",data:i.user,"node-key":i.userProps.key,props:i.userProps,"default-checked-keys":a.selectedIds,"show-checkbox":"","check-on-click-node":"",onCheckChange:a.userClick},null,8,["data","node-key","props","default-checked-keys","onCheckChange"])])),_:1},512)]),(0,t.Lk)("footer",null,[(0,t.bF)(p,{background:"",layout:"prev,next",small:"",total:i.total,"page-size":i.pageSize,currentPage:i.currentPage,"onUpdate:currentPage":l[1]||(l[1]=e=>i.currentPage=e),onCurrentChange:a.paginationChange},null,8,["total","page-size","currentPage","onCurrentChange"])])])),[[h,i.showUserloading]])])]),(0,t.Lk)("div",je,[(0,t.bF)(f,null,{default:(0,t.k6)((()=>[(0,t.bF)(m)])),_:1})]),(0,t.Lk)("div",Oe,[(0,t.Lk)("header",null,"已选 ("+(0,c.v_)(i.selected.length)+")",1),(0,t.Lk)("ul",null,[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.selected,((e,l)=>((0,t.uX)(),(0,t.CE)("li",{key:e.id},[(0,t.Lk)("span",Ie,[(0,t.bF)(k,{size:"small"},{default:(0,t.k6)((()=>[(0,t.eW)((0,c.v_)(e.name.substring(0,1)),1)])),_:2},1024),(0,t.Lk)("label",null,(0,c.v_)(e.name),1)]),(0,t.Lk)("span",Ke,[(0,t.bF)(n,{type:"danger",icon:"el-icon-delete",circle:"",size:"small",onClick:e=>a.deleteSelected(l)},null,8,["onClick"])])])))),128))])),_:1})])])])):(0,t.Q3)("",!0),2==i.type?((0,t.uX)(),(0,t.CE)("div",Ae,[(0,t.Lk)("div",Pe,[(0,t.Lk)("div",ze,[(0,t.bo)(((0,t.uX)(),(0,t.CE)("div",De,[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"menu",ref:"groupTree",data:i.role,"node-key":i.roleProps.key,props:i.roleProps,"show-checkbox":"","check-strictly":"","check-on-click-node":"","expand-on-click-node":!1,"default-checked-keys":a.selectedIds,onCheckChange:a.roleClick},null,8,["data","node-key","props","default-checked-keys","onCheckChange"])])),_:1})])),[[h,i.showGrouploading]])])]),(0,t.Lk)("div",Je,[(0,t.bF)(f,null,{default:(0,t.k6)((()=>[(0,t.bF)(m)])),_:1})]),(0,t.Lk)("div",Be,[(0,t.Lk)("header",null,"已选 ("+(0,c.v_)(i.selected.length)+")",1),(0,t.Lk)("ul",null,[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.selected,((e,l)=>((0,t.uX)(),(0,t.CE)("li",{key:e.id},[(0,t.Lk)("span",Ge,[(0,t.Lk)("label",null,(0,c.v_)(e.name),1)]),(0,t.Lk)("span",He,[(0,t.bF)(n,{type:"danger",icon:"el-icon-delete",circle:"",size:"small",onClick:e=>a.deleteSelected(l)},null,8,["onClick"])])])))),128))])),_:1})])])])):(0,t.Q3)("",!0)])),_:1},8,["modelValue","title","width"])}var Ye=o(31552),Ze={successCode:200,group:{apiObj:Ye.A.system.dept.list,parseData:function(e){return{rows:e.data,msg:e.message,code:e.code}},props:{key:"id",label:"label",children:"children"}},user:{apiObj:Ye.A.demo.page,pageSize:20,parseData:function(e){return{rows:e.data.rows,total:e.data.total,msg:e.message,code:e.code}},props:{key:"id",label:"user"},request:{page:"page",pageSize:"pageSize",groupId:"groupId",keyword:"keyword"}},role:{apiObj:Ye.A.system.dept.list,parseData:function(e){return{rows:e.data,msg:e.message,code:e.code}},props:{key:"id",label:"label",children:"children"}}},el={props:{modelValue:{type:Boolean,default:!1}},data(){return{groupProps:Ze.group.props,userProps:Ze.user.props,roleProps:Ze.role.props,titleMap:["人员选择","角色选择"],dialogVisible:!1,showGrouploading:!1,showUserloading:!1,keyword:"",groupId:"",pageSize:Ze.user.pageSize,total:0,currentPage:1,group:[],user:[],role:[],type:1,selected:[],value:[]}},computed:{selectedIds(){return this.selected.map((e=>e.id))}},mounted(){},methods:{open(e,l){this.type=e,this.value=l||[],this.selected=JSON.parse(JSON.stringify(l||[])),this.dialogVisible=!0,1==this.type?(this.getGroup(),this.getUser()):2==this.type&&this.getRole()},async getGroup(){this.showGrouploading=!0;var e=await Ze.group.apiObj.get();this.showGrouploading=!1;var l={[Ze.group.props.key]:"",[Ze.group.props.label]:"所有"};e.data.unshift(l),this.group=Ze.group.parseData(e).rows},async getUser(){this.showUserloading=!0;var e={[Ze.user.request.keyword]:this.keyword||null,[Ze.user.request.groupId]:this.groupId||null,[Ze.user.request.page]:this.currentPage,[Ze.user.request.pageSize]:this.pageSize},l=await Ze.user.apiObj.get(e);this.showUserloading=!1,this.user=Ze.user.parseData(l).rows,this.total=Ze.user.parseData(l).total||0,this.$refs.userScrollbar.setScrollTop(0)},async getRole(){this.showGrouploading=!0;var e=await Ze.role.apiObj.get();this.showGrouploading=!1,this.role=Ze.role.parseData(e).rows},groupClick(e){this.keyword="",this.currentPage=1,this.groupId=e[Ze.group.props.key],this.getUser()},userClick(e,l){l?this.selected.push({id:e[Ze.user.props.key],name:e[Ze.user.props.label]}):this.selected=this.selected.filter((l=>l.id!=e[Ze.user.props.key]))},paginationChange(){this.getUser()},search(){this.groupId="",this.$refs.groupTree.setCurrentKey(this.groupId),this.currentPage=1,this.getUser()},deleteSelected(e){this.selected.splice(e,1),1==this.type?this.$refs.userTree.setCheckedKeys(this.selectedIds):2==this.type&&this.$refs.groupTree.setCheckedKeys(this.selectedIds)},roleClick(e,l){l?this.selected.push({id:e[Ze.role.props.key],name:e[Ze.role.props.label]}):this.selected=this.selected.filter((l=>l.id!=e[Ze.role.props.key]))},save(){this.value.splice(0,this.value.length),this.selected.map((e=>{this.value.push(e)})),this.dialogVisible=!1}}};const ll=(0,$.A)(el,[["render",qe],["__scopeId","data-v-e3061d58"]]);var ol=ll,tl={provide(){return{select:this.selectHandle}},props:{modelValue:{type:Object,default:()=>{}}},components:{nodeWrap:xe,useSelect:ol},data(){return{nodeConfig:this.modelValue,selectVisible:!1}},watch:{modelValue(e){this.nodeConfig=e},nodeConfig(e){this.$emit("update:modelValue",e)}},mounted(){},methods:{selectHandle(e,l){this.selectVisible=!0,this.$nextTick((()=>{this.$refs.useselect.open(e,l)}))}}};const dl=(0,$.A)(tl,[["render",r]]);var il=dl,al={name:"workflow",components:{scWorkflow:il},data(){return{data:{id:1,name:"请假审批",nodeConfig:{nodeName:"发起人",type:0,nodeRoleList:[],childNode:{nodeName:"条件路由",type:4,conditionNodes:[{nodeName:"长期",type:3,priorityLevel:1,conditionMode:1,conditionList:[{label:"请假天数",field:"day",operator:">",value:"7"}],childNode:{nodeName:"领导审批",type:1,setType:1,nodeUserList:[{id:"360000197302144442",name:"何敏"}],nodeRoleList:[],examineLevel:1,directorLevel:1,selectMode:1,termAuto:!1,term:0,termMode:1,examineMode:1,directorMode:0}},{nodeName:"短期",type:3,priorityLevel:2,conditionMode:1,conditionList:[],childNode:{nodeName:"直接主管审批",type:1,setType:2,nodeUserList:[],nodeRoleList:[],examineLevel:1,directorLevel:1,selectMode:1,termAuto:!1,term:0,termMode:1,examineMode:1,directorMode:0}}],childNode:{nodeName:"抄送人",type:2,userSelectFlag:!0,nodeUserList:[{id:"220000200908305857",name:"何秀英"}]}}}}}},mounted(){},methods:{exportJson(){this.$message("返回值请查看F12控制台console.log()"),console.log(this.data)}}};const nl=(0,$.A)(al,[["render",i]]);var sl=nl}}]);