"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[1170],{68269:function(t,e,s){s.r(e),s.d(e,{default:function(){return S}});s(28743);var i=s(20641),l=s(72644);const a=t=>((0,i.Qi)("data-v-3cc37176"),t=t(),(0,i.jt)(),t),o={class:"widgets-content"},n={class:"widgets-top"},d=a((()=>(0,i.Lk)("div",{class:"widgets-top-title"}," 控制台 ",-1))),u={class:"widgets-top-actions"},c={class:"widgets",ref:"widgets"},r={class:"widgets-wrapper"},g={key:0,class:"no-widgets"},m={class:"widgets-item"},k={key:0,class:"customize-overlay"},p={key:0,class:"widgets-aside"},f={class:"widgets-aside-title"},L={class:"selectLayout"},h=a((()=>(0,i.Lk)("span",null,null,-1))),v=a((()=>(0,i.Lk)("span",null,null,-1))),y=a((()=>(0,i.Lk)("span",null,null,-1))),b=a((()=>(0,i.Lk)("span",null,null,-1))),C=a((()=>(0,i.Lk)("span",null,null,-1))),F=a((()=>(0,i.Lk)("span",null,null,-1))),_=a((()=>(0,i.Lk)("span",null,null,-1))),w=a((()=>(0,i.Lk)("span",null,null,-1))),z=a((()=>(0,i.Lk)("span",null,null,-1))),$={class:"widgets-list"},O={key:0,class:"widgets-list-nodata"},X={class:"item-logo"},W={class:"item-info"},E={class:"item-actions"};function D(t,e,s,a,D,G){const I=(0,i.g2)("el-button"),T=(0,i.g2)("el-empty"),j=(0,i.g2)("el-icon"),N=(0,i.g2)("draggable"),Q=(0,i.g2)("el-col"),S=(0,i.g2)("el-row"),x=(0,i.g2)("el-icon-circle-plus-filled"),A=(0,i.g2)("el-icon-close"),J=(0,i.g2)("el-header"),P=(0,i.g2)("el-main"),V=(0,i.g2)("el-footer"),R=(0,i.g2)("el-container");return(0,i.uX)(),(0,i.CE)("div",{class:(0,l.C4)(["widgets-home",D.customizing?"customizing":""]),ref:"main"},[(0,i.Lk)("div",o,[(0,i.Lk)("div",n,[d,(0,i.Lk)("div",u,[D.customizing?((0,i.uX)(),(0,i.Wv)(I,{key:0,type:"primary",icon:"el-icon-check",round:"",onClick:G.save},{default:(0,i.k6)((()=>[(0,i.eW)("完成")])),_:1},8,["onClick"])):((0,i.uX)(),(0,i.Wv)(I,{key:1,type:"primary",icon:"el-icon-edit",round:"",onClick:G.custom},{default:(0,i.k6)((()=>[(0,i.eW)("自定义")])),_:1},8,["onClick"]))])]),(0,i.Lk)("div",c,[(0,i.Lk)("div",r,[G.nowCompsList.length<=0?((0,i.uX)(),(0,i.CE)("div",g,[(0,i.bF)(T,{image:"img/no-widgets.svg",description:"没有部件啦","image-size":280})])):(0,i.Q3)("",!0),(0,i.bF)(S,{gutter:15},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(D.grid.layout,((t,e)=>((0,i.uX)(),(0,i.Wv)(Q,{key:e,md:t,xs:24},{default:(0,i.k6)((()=>[(0,i.bF)(N,{modelValue:D.grid.copmsList[e],"onUpdate:modelValue":t=>D.grid.copmsList[e]=t,animation:"200",handle:".customize-overlay",group:"people","item-key":"com",dragClass:"aaaaa","force-fallback":"",fallbackOnBody:"",class:"draggable-box"},{item:(0,i.k6)((({element:t})=>[(0,i.Lk)("div",m,[((0,i.uX)(),(0,i.Wv)((0,i.$y)(D.allComps[t]))),D.customizing?((0,i.uX)(),(0,i.CE)("div",k,[(0,i.bF)(I,{class:"close",type:"danger",plain:"",icon:"el-icon-close",size:"small",onClick:e=>G.remove(t)},null,8,["onClick"]),(0,i.Lk)("label",null,[(0,i.bF)(j,null,{default:(0,i.k6)((()=>[((0,i.uX)(),(0,i.Wv)((0,i.$y)(D.allComps[t].icon)))])),_:2},1024),(0,i.eW)((0,l.v_)(D.allComps[t].title),1)])])):(0,i.Q3)("",!0)])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["md"])))),128))])),_:1})])],512)]),D.customizing?((0,i.uX)(),(0,i.CE)("div",p,[(0,i.bF)(R,null,{default:(0,i.k6)((()=>[(0,i.bF)(J,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",f,[(0,i.bF)(j,null,{default:(0,i.k6)((()=>[(0,i.bF)(x)])),_:1}),(0,i.eW)("添加部件")]),(0,i.Lk)("div",{class:"widgets-aside-close",onClick:e[0]||(e[0]=t=>G.close())},[(0,i.bF)(j,null,{default:(0,i.k6)((()=>[(0,i.bF)(A)])),_:1})])])),_:1}),(0,i.bF)(J,{style:{height:"auto"}},{default:(0,i.k6)((()=>[(0,i.Lk)("div",L,[(0,i.Lk)("div",{class:(0,l.C4)(["selectLayout-item item01",{active:"12,6,6"==D.grid.layout.join(",")}]),onClick:e[1]||(e[1]=t=>G.setLayout([12,6,6]))},[(0,i.bF)(S,{gutter:2},{default:(0,i.k6)((()=>[(0,i.bF)(Q,{span:12},{default:(0,i.k6)((()=>[h])),_:1}),(0,i.bF)(Q,{span:6},{default:(0,i.k6)((()=>[v])),_:1}),(0,i.bF)(Q,{span:6},{default:(0,i.k6)((()=>[y])),_:1})])),_:1})],2),(0,i.Lk)("div",{class:(0,l.C4)(["selectLayout-item item02",{active:"24,16,8"==D.grid.layout.join(",")}]),onClick:e[2]||(e[2]=t=>G.setLayout([24,16,8]))},[(0,i.bF)(S,{gutter:2},{default:(0,i.k6)((()=>[(0,i.bF)(Q,{span:24},{default:(0,i.k6)((()=>[b])),_:1}),(0,i.bF)(Q,{span:16},{default:(0,i.k6)((()=>[C])),_:1}),(0,i.bF)(Q,{span:8},{default:(0,i.k6)((()=>[F])),_:1})])),_:1})],2),(0,i.Lk)("div",{class:(0,l.C4)(["selectLayout-item item03",{active:"24"==D.grid.layout.join(",")}]),onClick:e[3]||(e[3]=t=>G.setLayout([24]))},[(0,i.bF)(S,{gutter:2},{default:(0,i.k6)((()=>[(0,i.bF)(Q,{span:24},{default:(0,i.k6)((()=>[_])),_:1}),(0,i.bF)(Q,{span:24},{default:(0,i.k6)((()=>[w])),_:1}),(0,i.bF)(Q,{span:24},{default:(0,i.k6)((()=>[z])),_:1})])),_:1})],2)])])),_:1}),(0,i.bF)(P,{class:"nopadding"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",$,[G.myCompsList.length<=0?((0,i.uX)(),(0,i.CE)("div",O,[(0,i.bF)(T,{description:"没有部件啦","image-size":60})])):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(G.myCompsList,(t=>((0,i.uX)(),(0,i.CE)("div",{key:t.title,class:"widgets-list-item"},[(0,i.Lk)("div",X,[(0,i.bF)(j,null,{default:(0,i.k6)((()=>[((0,i.uX)(),(0,i.Wv)((0,i.$y)(t.icon)))])),_:2},1024)]),(0,i.Lk)("div",W,[(0,i.Lk)("h2",null,(0,l.v_)(t.title),1),(0,i.Lk)("p",null,(0,l.v_)(t.description),1)]),(0,i.Lk)("div",E,[(0,i.bF)(I,{type:"primary",icon:"el-icon-plus",size:"small",onClick:e=>G.push(t)},null,8,["onClick"])])])))),128))])])),_:1}),(0,i.bF)(V,{style:{height:"51px"}},{default:(0,i.k6)((()=>[(0,i.bF)(I,{size:"small",onClick:e[4]||(e[4]=t=>G.backDefaul())},{default:(0,i.k6)((()=>[(0,i.eW)("恢复默认")])),_:1})])),_:1})])),_:1})])):(0,i.Q3)("",!0)],2)}var G=s(432),I=s.n(G),T=s(16511),j={components:{draggable:I()},data(){return{customizing:!1,allComps:T["default"],selectLayout:[],defaultGrid:this.$CONFIG.DEFAULT_GRID,grid:[]}},created(){this.grid=this.$TOOL.data.get("grid")||JSON.parse(JSON.stringify(this.defaultGrid))},mounted(){this.$emit("on-mounted")},computed:{allCompsList(){var t=[];for(var e in this.allComps)t.push({key:e,title:T["default"][e].title,icon:T["default"][e].icon,description:T["default"][e].description});var s=this.grid.copmsList.reduce((function(t,e){return t.concat(e)}));for(let i of t){const t=s.find((t=>t===i.key));t&&(i.disabled=!0)}return t},myCompsList(){var t=this.$TOOL.data.get("DASHBOARDGRID");return this.allCompsList.filter((e=>!e.disabled&&t.includes(e.key)))},nowCompsList(){return this.grid.copmsList.reduce((function(t,e){return t.concat(e)}))}},methods:{custom(){this.customizing=!0;const t=this.$refs.widgets.offsetWidth;this.$nextTick((()=>{const e=this.$refs.widgets.offsetWidth/t;this.$refs.widgets.style.setProperty("transform",`scale(${e})`)}))},setLayout(t){this.grid.layout=t,"24"==t.join(",")&&(this.grid.copmsList[0]=[...this.grid.copmsList[0],...this.grid.copmsList[1],...this.grid.copmsList[2]],this.grid.copmsList[1]=[],this.grid.copmsList[2]=[])},push(t){let e=this.grid.copmsList[0];e.push(t.key)},remove(t){var e=this.grid.copmsList;e.forEach(((s,i)=>{var l=s.filter((e=>e!=t));e[i]=l}))},save(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform"),this.$TOOL.data.set("grid",this.grid)},backDefaul(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform"),this.grid=JSON.parse(JSON.stringify(this.defaultGrid)),this.$TOOL.data.remove("grid")},close(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform")}}},N=s(66262);const Q=(0,N.A)(j,[["render",D],["__scopeId","data-v-3cc37176"]]);var S=Q}}]);