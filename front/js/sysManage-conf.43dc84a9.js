"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[7530],{18898:function(e,l,a){a.r(l),a.d(l,{default:function(){return T}});var t=a(20641),o=a(72644);const s=e=>((0,t.Qi)("data-v-4e44365a"),e=e(),(0,t.jt)(),e),r={class:"box"},m=s((()=>(0,t.Lk)("div",{class:"title"},[(0,t.Lk)("b"),(0,t.Lk)("span",null,"基本信息")],-1))),n={class:"cont"},d=s((()=>(0,t.Lk)("div",{class:"title"},[(0,t.Lk)("b"),(0,t.Lk)("span",null,"账号设定")],-1))),u={class:"cont"},i=s((()=>(0,t.Lk)("span",{style:{"margin-left":"5px","font-size":"12px"}},"次",-1))),_=s((()=>(0,t.Lk)("span",{style:{"margin-left":"5px","font-size":"12px"}},"天",-1))),c=s((()=>(0,t.Lk)("div",{class:"title"},[(0,t.Lk)("b"),(0,t.Lk)("span",null,"日志外发设置")],-1))),p={class:"cont"},b=s((()=>(0,t.Lk)("div",{class:"title"},[(0,t.Lk)("b"),(0,t.Lk)("span",null,"允许登录IP设置")],-1))),f={class:"cont"},k=s((()=>(0,t.Lk)("div",{class:"title"},[(0,t.Lk)("b"),(0,t.Lk)("span",null,"安全事件合并设置")],-1))),V={class:"cont"},v=s((()=>(0,t.Lk)("div",{class:"title"},[(0,t.Lk)("b"),(0,t.Lk)("span",null,"时间设置")],-1))),y={class:"cont"},g={class:"time-cur"},F=s((()=>(0,t.Lk)("div",{class:"title"},[(0,t.Lk)("b"),(0,t.Lk)("span",null,"日志管理策略")],-1))),h={class:"cont"},L=s((()=>(0,t.Lk)("div",{class:"title"},[(0,t.Lk)("b"),(0,t.Lk)("span",null,"磁盘管理策略")],-1))),w={class:"cont"},U=s((()=>(0,t.Lk)("span",{style:{"margin-left":"5px","font-size":"12px"}},"%",-1))),x=s((()=>(0,t.Lk)("p",null,"超过告警阈值，请及时做好备份！",-1))),I={class:"btn-line"};function P(e,l,a,s,P,z){const Y=(0,t.g2)("el-input"),D=(0,t.g2)("el-form-item"),$=(0,t.g2)("el-input-number"),M=(0,t.g2)("el-option"),T=(0,t.g2)("el-select"),C=(0,t.g2)("el-checkbox"),W=(0,t.g2)("el-radio"),H=(0,t.g2)("el-radio-group"),A=(0,t.g2)("el-date-picker"),O=(0,t.g2)("el-form"),Q=(0,t.g2)("el-button");return(0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(O,{model:P.form,"label-width":"100",style:{"max-width":"400px"},rules:P.rules},{default:(0,t.k6)((()=>[m,(0,t.Lk)("div",n,[(0,t.bF)(D,{label:"系统名称"},{default:(0,t.k6)((()=>[(0,t.bF)(Y,{modelValue:P.form.system_name,"onUpdate:modelValue":l[0]||(l[0]=e=>P.form.system_name=e),clearable:"",placeholder:"请输入系统名称"},null,8,["modelValue"])])),_:1}),(0,t.bF)(D,{label:"设备名称"},{default:(0,t.k6)((()=>[(0,t.bF)(Y,{modelValue:P.form.device_name,"onUpdate:modelValue":l[1]||(l[1]=e=>P.form.device_name=e),clearable:"",placeholder:"请输入设备名称"},null,8,["modelValue"])])),_:1}),(0,t.bF)(D,{label:"设备位置"},{default:(0,t.k6)((()=>[(0,t.bF)(Y,{modelValue:P.form.location,"onUpdate:modelValue":l[2]||(l[2]=e=>P.form.location=e),clearable:"",placeholder:"请输入设备位置"},null,8,["modelValue"])])),_:1}),(0,t.bF)(D,{label:"联系人"},{default:(0,t.k6)((()=>[(0,t.bF)(Y,{modelValue:P.form.contact,"onUpdate:modelValue":l[3]||(l[3]=e=>P.form.contact=e),clearable:"",placeholder:"请输入联系人"},null,8,["modelValue"])])),_:1}),(0,t.bF)(D,{label:"联系方式"},{default:(0,t.k6)((()=>[(0,t.bF)(Y,{modelValue:P.form.phone,"onUpdate:modelValue":l[4]||(l[4]=e=>P.form.phone=e),clearable:"",placeholder:"请输入联系方式"},null,8,["modelValue"])])),_:1})]),d,(0,t.Lk)("div",u,[(0,t.bF)(D,{label:"登录失败次数"},{default:(0,t.k6)((()=>[(0,t.bF)($,{modelValue:P.form.password_freeze_count,"onUpdate:modelValue":l[5]||(l[5]=e=>P.form.password_freeze_count=e),placeholder:"登录失败次数",clearable:""},null,8,["modelValue"]),i])),_:1}),(0,t.bF)(D,{label:"密码修改周期"},{default:(0,t.k6)((()=>[(0,t.bF)($,{modelValue:P.form.password_update_interval,"onUpdate:modelValue":l[6]||(l[6]=e=>P.form.password_update_interval=e),min:15,clearable:""},null,8,["modelValue"]),_])),_:1}),(0,t.bF)(D,{label:"登录超时设置"},{default:(0,t.k6)((()=>[(0,t.bF)(T,{modelValue:P.form.password_time,"onUpdate:modelValue":l[7]||(l[7]=e=>P.form.password_time=e),placeholder:"登录超时设置",style:{width:"260px"}},{default:(0,t.k6)((()=>[(0,t.bF)(M,{label:"1小时",value:"1"}),(0,t.bF)(M,{label:"3小时",value:"3"}),(0,t.bF)(M,{label:"12小时",value:"12"}),(0,t.bF)(M,{label:"24小时",value:"24"})])),_:1},8,["modelValue"])])),_:1})]),c,(0,t.Lk)("div",p,[(0,t.bF)(D,{label:"IP"},{default:(0,t.k6)((()=>[(0,t.bF)(Y,{modelValue:P.form.syslog_ip,"onUpdate:modelValue":l[8]||(l[8]=e=>P.form.syslog_ip=e),placeholder:"IP",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(D,{label:"端口"},{default:(0,t.k6)((()=>[(0,t.bF)(Y,{modelValue:P.form.syslog_port,"onUpdate:modelValue":l[9]||(l[9]=e=>P.form.syslog_port=e),placeholder:"端口",clearable:""},null,8,["modelValue"])])),_:1})]),b,(0,t.Lk)("div",f,[(0,t.bF)(D,{label:"IP"},{default:(0,t.k6)((()=>[(0,t.bF)(Y,{modelValue:P.form.ip_array,"onUpdate:modelValue":l[10]||(l[10]=e=>P.form.ip_array=e),placeholder:"多个IP用;号分隔",clearable:""},null,8,["modelValue"])])),_:1})]),k,(0,t.Lk)("div",V,[(0,t.bF)(D,{label:"选择"},{default:(0,t.k6)((()=>[(0,t.bF)(C,{modelValue:P.form.secure_name,"onUpdate:modelValue":l[11]||(l[11]=e=>P.form.secure_name=e),label:"按照单位时间内攻击类型合并"},null,8,["modelValue"]),(0,t.bF)(C,{modelValue:P.form.secure_number,"onUpdate:modelValue":l[12]||(l[12]=e=>P.form.secure_number=e),label:"按照单位时间内IP地址合并"},null,8,["modelValue"])])),_:1})]),v,(0,t.Lk)("div",y,[(0,t.Lk)("p",g,"当前系统时间："+(0,o.v_)(P.currentTime),1),(0,t.bF)(D,{label:"时间"},{default:(0,t.k6)((()=>[(0,t.bF)(H,{modelValue:P.form.time_type,"onUpdate:modelValue":l[13]||(l[13]=e=>P.form.time_type=e)},{default:(0,t.k6)((()=>[(0,t.bF)(W,{label:0},{default:(0,t.k6)((()=>[(0,t.eW)("自定义时间")])),_:1}),(0,t.bF)(W,{label:1},{default:(0,t.k6)((()=>[(0,t.eW)("NTP服务器时间")])),_:1})])),_:1},8,["modelValue"])])),_:1}),0==P.form.time_type?((0,t.uX)(),(0,t.Wv)(D,{key:0,label:"自定义时间"},{default:(0,t.k6)((()=>[(0,t.bF)(A,{modelValue:P.form.setting_time,"onUpdate:modelValue":l[14]||(l[14]=e=>P.form.setting_time=e),type:"datetime",placeholder:"请选择日期时间"},null,8,["modelValue"])])),_:1})):(0,t.Q3)("",!0),1==P.form.time_type?((0,t.uX)(),(0,t.Wv)(D,{key:1,label:"服务器地址"},{default:(0,t.k6)((()=>[(0,t.bF)(Y,{modelValue:P.form.url,"onUpdate:modelValue":l[15]||(l[15]=e=>P.form.url=e),placeholder:"服务器地址",clearable:""},null,8,["modelValue"])])),_:1})):(0,t.Q3)("",!0)]),F,(0,t.Lk)("div",h,[(0,t.bF)(D,{label:"日志保留期限"},{default:(0,t.k6)((()=>[(0,t.bF)(T,{modelValue:P.form.log_save_type,"onUpdate:modelValue":l[16]||(l[16]=e=>P.form.log_save_type=e),placeholder:"日志保留期限",style:{width:"260px"}},{default:(0,t.k6)((()=>[(0,t.bF)(M,{label:"半年",value:1}),(0,t.bF)(M,{label:"1年",value:2}),(0,t.bF)(M,{label:"3年",value:3})])),_:1},8,["modelValue"])])),_:1})]),L,(0,t.Lk)("div",w,[(0,t.bF)(D,{label:"告警阈值"},{default:(0,t.k6)((()=>[(0,t.bF)($,{modelValue:P.form.men_alert,"onUpdate:modelValue":l[17]||(l[17]=e=>P.form.men_alert=e),clearable:""},null,8,["modelValue"]),U,x])),_:1})])])),_:1},8,["model","rules"]),(0,t.Lk)("div",I,[(0,t.bF)(Q,{type:"primary",onClick:z.update},{default:(0,t.k6)((()=>[(0,t.eW)("保存")])),_:1},8,["onClick"])])])}var z=a(2543),Y=a.n(z),D={components:{},data(){return{form:{system_name:"",device_name:"",location:"",contact:"",phone:"",password_freeze_count:"",password_update_interval:"",password_time:"",time_type:"",setting_time:"",url:"",syslog_ip:"",syslog_port:"",ip_array:"",secure_name:!1,secure_number:!1,log_save_type:"",men_alert:""},radio1:1,rules:{name:[{required:!0,message:"请输入设备名称",trigger:"blur"}]},currentTime:"",timer:void 0,time1:"",time2:""}},created(){this.currentTime=this.$moment().format("YYYY-MM-DD HH:mm:ss"),this.initData()},mounted(){this.timer=setInterval((()=>{this.currentTime=this.$moment().format("YYYY-MM-DD HH:mm:ss")}),1e3)},beforeUnmount(){clearInterval(this.timer)},methods:{async initData(){let e=await this.$API.sysManage.conf.detail.post();console.log(e),this.form={system_name:e.data.base_information[0].system_name,device_name:e.data.base_information[0].device_name,location:e.data.base_information[0].location,contact:e.data.base_information[0].contact,phone:e.data.base_information[0].phone,password_freeze_count:e.data.password_information[0].password_freeze_count,password_update_interval:e.data.password_information[0].password_update_interval,password_time:e.data.password_information[0].password_time,time_type:e.data.time_information[0].time_type,setting_time:e.data.time_information[0].setting_time,url:e.data.time_information[0].url,syslog_ip:e.data.syslog_information[0].syslog_ip,syslog_port:e.data.syslog_information[0].syslog_port,ip_array:e.data.ip_address_information[0].ip_array,secure_name:"1"==e.data.secure_combine[0].secure_name,secure_number:"1"==e.data.secure_combine[0].secure_number,log_save_type:e.data.log_save_type[0].log_save_type,men_alert:e.data.men_alert[0].men_alert}},async update(){var e=this.$TOOL.data.get("USER_INFO");let l=Y().cloneDeep(this.form);l.user_id=e.user_id,l.secure_name=this.form.secure_name?"1":"0",l.secure_number=this.form.secure_number?"1":"0",l.id=1;let a=await this.$API.sysManage.conf.update.post(l);console.log(a),a.success?this.$message.success("更新成功！"):this.$message.success(a.message)}}},$=a(66262);const M=(0,$.A)(D,[["render",P],["__scopeId","data-v-4e44365a"]]);var T=M}}]);