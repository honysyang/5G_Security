"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[9971],{16920:function(e,a,l){l.r(a),l.d(a,{default:function(){return b}});var s=l(20641),t=l(72644);const i={class:"left-panel"},n={class:"right-panel"},r={class:"right-panel-search"};function o(e,a,l,o,c,d){const u=(0,s.g2)("el-button"),p=(0,s.g2)("el-input"),h=(0,s.g2)("el-option"),m=(0,s.g2)("el-select"),b=(0,s.g2)("el-header"),g=(0,s.g2)("el-table-column"),f=(0,s.g2)("el-popconfirm"),k=(0,s.g2)("el-button-group"),w=(0,s.g2)("scTable"),v=(0,s.g2)("el-main"),y=(0,s.g2)("detail-view"),_=(0,s.g2)("el-drawer"),$=(0,s.g2)("el-container"),C=(0,s.g2)("save-dialog");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)($,null,{default:(0,s.k6)((()=>[(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",i,[(0,s.bF)(u,{type:"primary",icon:"el-icon-plus",onClick:d.add},null,8,["onClick"]),(0,s.bF)(u,{type:"danger",plain:"",icon:"el-icon-delete",disabled:0==c.selection.length,onClick:d.batch_del},null,8,["disabled","onClick"])]),(0,s.Lk)("div",n,[(0,s.Lk)("div",r,[(0,s.bF)(p,{modelValue:c.search.name_keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>c.search.name_keyword=e),placeholder:"策略名称",clearable:""},null,8,["modelValue"]),(0,s.bF)(m,{modelValue:c.search.actions,"onUpdate:modelValue":a[1]||(a[1]=e=>c.search.actions=e),placeholder:"状态",clearable:"",style:{width:"200px"}},{default:(0,s.k6)((()=>[(0,s.bF)(h,{label:"禁用",value:"0"}),(0,s.bF)(h,{label:"启用",value:"1"})])),_:1},8,["modelValue"]),(0,s.bF)(u,{type:"primary",icon:"el-icon-search",onClick:d.upsearch},null,8,["onClick"])])])])),_:1}),(0,s.bF)(v,{class:"nopadding"},{default:(0,s.k6)((()=>[(0,s.bF)(w,{ref:"table",apiObj:c.list.apiObj,column:c.list.column,params:c.params,"row-key":"id",stripe:"",onSelectionChange:d.selectionChange},{time:(0,s.k6)((e=>[(0,s.eW)((0,t.v_)(d.showTime(e.row.time)),1)])),default:(0,s.k6)((()=>[(0,s.bF)(g,{type:"selection",width:"50"}),(0,s.bF)(g,{label:"操作",fixed:"right",align:"center",width:"200"},{default:(0,s.k6)((e=>[(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{text:"",type:"primary",size:"small",onClick:a=>d.table_view(e.row)},{default:(0,s.k6)((()=>[(0,s.eW)("查看")])),_:2},1032,["onClick"]),(0,s.bF)(u,{text:"",type:"primary",size:"small",onClick:a=>d.table_edit(e.row,e.$index)},{default:(0,s.k6)((()=>[(0,s.eW)("编辑")])),_:2},1032,["onClick"]),(0,s.bF)(f,{title:"确定删除吗？",onConfirm:a=>d.table_del(e.row,e.$index)},{reference:(0,s.k6)((()=>[(0,s.bF)(u,{text:"",type:"primary",size:"small"},{default:(0,s.k6)((()=>[(0,s.eW)("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:2},1024)])),_:1})])),_:1},8,["apiObj","column","params","onSelectionChange"])])),_:1}),(0,s.bF)(_,{modelValue:c.drawer,"onUpdate:modelValue":a[2]||(a[2]=e=>c.drawer=e),title:"详情",size:"80%"},{default:(0,s.k6)((()=>[(0,s.bF)(y,{params:c.drawerParams},null,8,["params"])])),_:1},8,["modelValue"])])),_:1}),c.dialog.save?((0,s.uX)(),(0,s.Wv)(C,{key:0,ref:"saveDialog",onSuccess:d.handleSaveSuccess,onClosed:a[3]||(a[3]=e=>c.dialog.save=!1)},null,8,["onSuccess"])):(0,s.Q3)("",!0)],64)}var c=l(48548),d=l(3687),u=l(8897),p={name:"ngap",components:{DetailView:d["default"],saveDialog:u["default"]},data(){return{params:{label:""},selection:[],list:{apiObj:this.$API.sysManage.device.page,column:[{label:"IMEI",prop:"imei"},{label:"IMSI",prop:"imsi"},{label:"IP",prop:"ip_address"},{label:"MSISDN",prop:"msisdn"},{label:"PDN_TYPE",prop:"pdn_type"},{label:"创建时间",prop:"time"}]},disposeIconList:{on:c.Check,off:c.Close},search:{name_keyword:"",action:"",label:""},drawer:!1,drawerParams:{},dialog:{save:!1}}},computed:{showTime(){return e=>this.$moment(e).utc().format("YYYY-MM-DD HH:mm:ss")}},created(){},methods:{upsearch(){this.$refs.table.upData(this.search)},table_view(e){this.drawerParams={id:e.id},this.drawer=!0},add(){this.dialog.save=!0,this.$nextTick((()=>{this.$refs.saveDialog.open()}))},handleSaveSuccess(){this.$refs.table.refresh()},selectionChange(e){this.selection=e},async batch_del(){this.$confirm(`确定删除选中的 ${this.selection.length} 项吗？`,"提示",{type:"warning"}).then((()=>{console.log(this.selection);let e={id:this.selection.map((e=>e.id)).join(",")};this.$API.sysManage.device.del.delete(e).then((e=>{200==e.status?(this.$refs.table.refresh(),this.$message.success("操作成功")):this.$alert(e.message,"提示",{type:"error"})})),this.$refs.table.refresh(),this.$message.success("操作成功")})).catch((()=>{}))},async table_del(e){let a={id:`${e.id}`},l=await this.$API.sysManage.device.del.delete(a);200==l.status?(this.$refs.table.refresh(),this.$message.success("操作成功")):this.$alert(l.message,"提示",{type:"error"})},table_edit(e){this.dialog.save=!0,this.$nextTick((()=>{this.$refs.saveDialog.open("edit").setData(e)}))}}},h=l(66262);const m=(0,h.A)(p,[["render",o]]);var b=m}}]);