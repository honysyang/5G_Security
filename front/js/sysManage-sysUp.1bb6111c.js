"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[1708],{27672:function(e,s,l){l.r(s),l.d(s,{default:function(){return y}});var t=l(20641),i=l(72644);const a=e=>((0,t.Qi)("data-v-fdba62e2"),e=e(),(0,t.jt)(),e),n={class:"box"},o=a((()=>(0,t.Lk)("div",{class:"title"},[(0,t.Lk)("b"),(0,t.Lk)("span",null,"版本升级")],-1))),u={class:"base"},d=a((()=>(0,t.Lk)("div",{class:"imglogo"},[(0,t.Lk)("img",{src:"img/sysUp.png",alt:""})],-1))),r={class:"baseinfo"},p={class:"base-btn"},f={class:"box"},c=a((()=>(0,t.Lk)("div",{class:"title"},[(0,t.Lk)("b"),(0,t.Lk)("span",null,"特征码升级"),(0,t.Lk)("i",{class:"time-dur"},"更新周期：14天")],-1))),k={class:"base"},L=a((()=>(0,t.Lk)("div",{class:"imglogo"},[(0,t.Lk)("img",{src:"img/sysUp1.png",alt:""})],-1))),g={class:"baseinfo"},b={class:"base-btn"};function m(e,s,l,a,m,v){const h=(0,t.g2)("Lightning"),F=(0,t.g2)("el-icon"),_=(0,t.g2)("el-button"),w=(0,t.g2)("Upload"),I=(0,t.g2)("el-upload"),y=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bo)(((0,t.uX)(),(0,t.CE)("div",n,[o,(0,t.Lk)("div",u,[d,(0,t.Lk)("div",r,[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,"当前版本："+(0,i.v_)(m.newInfo.version),1)]),(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,"当前版本构建号："+(0,i.v_)(m.newInfo.build),1)]),(0,t.Lk)("p",null,[(0,t.Lk)("span",null,"升级时间："+(0,i.v_)(m.newInfo.time),1)])]),(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,"上一版本："+(0,i.v_)(m.oldInfo.version),1)]),(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,"上一版本构建号："+(0,i.v_)(m.oldInfo.build),1)]),(0,t.Lk)("p",null,[(0,t.Lk)("span",null,"升级时间："+(0,i.v_)(m.oldInfo.time),1)])])]),(0,t.Lk)("div",p,[(0,t.Lk)("p",null,[(0,t.bF)(_,{type:"primary",disabled:""},{default:(0,t.k6)((()=>[(0,t.bF)(F,null,{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1}),(0,t.eW)("在线升级 ")])),_:1})]),(0,t.Lk)("p",null,[(0,t.bF)(I,{"file-list":m.fileList,"onUpdate:fileList":s[0]||(s[0]=e=>m.fileList=e),class:"upload-demo",action:"https://192.168.181.60:7000/ais_upload",limit:1,name:"file","on-success":v.fileSuccess,data:m.upData,"show-file-list":!1,"before-upload":v.beforeUpload},{default:(0,t.k6)((()=>[(0,t.bF)(_,{type:"primary"},{default:(0,t.k6)((()=>[(0,t.bF)(F,null,{default:(0,t.k6)((()=>[(0,t.bF)(w)])),_:1}),(0,t.eW)("本地升级 ")])),_:1})])),_:1},8,["file-list","on-success","data","before-upload"])])])])])),[[y,m.loading]]),(0,t.bo)(((0,t.uX)(),(0,t.CE)("div",f,[c,(0,t.Lk)("div",k,[L,(0,t.Lk)("div",g,[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,"当前版本："+(0,i.v_)(m.newFeatures.version),1)]),(0,t.Lk)("p",null,[(0,t.Lk)("span",null,"升级时间："+(0,i.v_)(m.newFeatures.time),1)])]),(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,"上一版本："+(0,i.v_)(m.oldFeatures.version),1)]),(0,t.Lk)("p",null,[(0,t.Lk)("span",null,"升级时间："+(0,i.v_)(m.oldFeatures.time),1)])])]),(0,t.Lk)("div",b,[(0,t.Lk)("p",null,[(0,t.bF)(_,{type:"primary",disabled:""},{default:(0,t.k6)((()=>[(0,t.bF)(F,null,{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1}),(0,t.eW)("在线升级 ")])),_:1})]),(0,t.Lk)("p",null,[(0,t.bF)(I,{"file-list":m.fileListFeature,"onUpdate:fileList":s[1]||(s[1]=e=>m.fileListFeature=e),class:"upload-demo",action:"https://192.168.181.60:7000/ais_upload",limit:1,"on-success":v.fileSuccessFeature,data:m.upData1,"show-file-list":!1,"before-upload":v.beforeUpload1},{default:(0,t.k6)((()=>[(0,t.bF)(_,{type:"primary"},{default:(0,t.k6)((()=>[(0,t.bF)(F,null,{default:(0,t.k6)((()=>[(0,t.bF)(w)])),_:1}),(0,t.eW)("本地升级 ")])),_:1})])),_:1},8,["file-list","on-success","data","before-upload"])])])])])),[[y,m.loading1]])],64)}var v=l(48548),h=l(2543),F=l.n(h),_={components:{Monitor:v.Monitor,User:v.User,Upload:v.Upload,Lightning:v.Lightning},data(){return{fileList:[],fileListFeature:[],newInfo:{version:"1.21",build:"258",time:"2024-05-23 15:13:04"},oldInfo:{version:"1.0",build:"1295",time:"2024-05-08 18:02:52"},newFeatures:{version:"v-0254-Gyz0",time:"2024-05-01 09:35:26"},oldFeatures:{version:"v-5196-Fno9",time:"2024-04-20 08:12:56"},upData:{},upData1:{},loading:!1,loading1:!1}},created(){let e=window.localStorage.getItem("upKey");e&&(this.oldInfo=F().cloneDeep(this.newInfo),this.newInfo=JSON.parse(e));let s=window.localStorage.getItem("upKeyFeature");s&&(this.oldFeatures=F().cloneDeep(this.newFeatures),this.newFeatures=JSON.parse(s));var l=this.$TOOL.data.get("USER_INFO");this.upData={user_id:Number(l.user_id),fileType:"system"},this.upData1={user_id:Number(l.user_id),fileType:"code"}},methods:{beforeUpload(){this.loading=!0},fileSuccess(e){200==e.code&&(e.status?(this.$message.success("上传成功!"),setTimeout((()=>{this.oldInfo=F().cloneDeep(this.newInfo),this.newInfo={build:e.build,version:e.version,time:e.current_time},this.loading=!1}),3e3),window.localStorage.setItem("upKey",JSON.stringify(this.newInfo))):(this.fileList=[],setTimeout((()=>{this.loading=!1,this.$message.error(e.message)}),3e3)))},beforeUpload1(){this.loading1=!0},fileSuccessFeature(e){200==e.code&&(e.status?(this.$message.success("上传成功!"),setTimeout((()=>{this.oldFeatures=F().cloneDeep(this.newFeatures),this.newFeatures={version:e.feature,time:e.current_time},this.loading1=!1}),3e3),window.localStorage.setItem("upKeyFeature",JSON.stringify(this.newFeatures))):(this.fileListFeature=[],setTimeout((()=>{this.loading1=!1,this.$message.error(e.message)}),3e3)))}}},w=l(66262);const I=(0,w.A)(_,[["render",m],["__scopeId","data-v-fdba62e2"]]);var y=I}}]);